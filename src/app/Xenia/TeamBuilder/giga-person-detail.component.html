<ngb-tabset *ngIf="person">
    <ngb-tab title="{{'USER.MENU.INFO' | translate}}" id="tabInfo">
        <ng-template ngbTabContent>
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-9">
                            <div class="row">
                                <div class="col-sm-4 col-lg-4">{{'PUBLIC.TEAMBUILDER.PERSONS.LABEL.FULLNAME' | translate}}</div>
                                <div class="col-sm-6">{{person.annotation.fullName}}</div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'USER.LABEL.NAME' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor [content]="person.data.name" [showControls]="true" (editSaved)="nameUserUpdated($event)" [readOnly]="!hasRights()"></gg-editor>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'USER.LABEL.FIRST NAME' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor [content]="person.data.firstName" [showControls]="true" (editSaved)="firstNameUserUpdated($event)" [readOnly]="!hasRights()"></gg-editor>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'PUBLIC.TEAMBUILDER.PERSONS.LABEL.EMAIL' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor [content]="person.data.email" [showControls]="true" [regexp]="'^[0-9a-z_.-]+@[0-9a-z.-]+\\.[a-z]{2,3}$'" (editSaved)="emailUserUpdated($event)"
                                        [readOnly]="!hasRights()"></gg-editor>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'PUBLIC.TEAMBUILDER.PERSONS.LABEL.TELEPHONE' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor [content]="person.data.telephone" [showControls]="true" [regexp]="'^[+]?([0-9]*[\\.\\s\\-\\(\\)]|[0-9]+){3,24}$'"
                                        (editSaved)="telUserUpdated($event)" [readOnly]="!hasRights()"></gg-editor>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'USER.LABEL.FUNCTIONS' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-selector [selectableData]="selectableFunctions" [selectedIds]="selectedFunctionIdsObservable" (selectionChanged)="functionSelectionChanged($event)"
                                        [readOnly]="!hasRights()"></gg-selector>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'PUBLIC.TEAMBUILDER.PERSONS.LABEL.U USER' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor [content]="person.data.ulgId" [showControls]="true" (editSaved)="ulgIdUpdated($event)" [readOnly]="!hasRights()"></gg-editor>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-lg-4 align-self-center">{{'PUBLIC.TEAMBUILDER.PERSONS.LABEL.HAS LEFT GIGA' | translate}}</div>
                                <div class="col-sm-6 align-self-center">
                                    <gg-editor-boolean [content]="person.data.hasLeft" (editSaved)="hasLeftUpdated($event)" [readOnly]="!hasRights()"></gg-editor-boolean>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'PUBLIC.TEAMBUILDER.PERSONS.MENU.PI TYPE' | translate" id="tabPiType" *ngIf="person.annotation.isPi">
        <ng-template ngbTabContent>
            <div class="card">
                <div class="card-body">
                    <gg-pi-type-choice [thisPerson]="person"></gg-pi-type-choice>
                </div>
            </div>
        </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'PUBLIC.TEAMBUILDER.PERSONS.MENU.DELETE' | translate" id="tabDelete" *ngIf="person.annotation.canDelete && hasRights()">
        <ng-template ngbTabContent>
            <div class="card">
                <div class="card-body">
                    <gg-button-action-confirm (doAction)="deletePerson()" [typeObjectKey]="'GENERAL.OBJECT.PERSON'" [typeActionKey]="'GENERAL.ACTION.DELETE'"></gg-button-action-confirm>
                </div>
            </div>
        </ng-template>
    </ngb-tab>
    <ngb-tab title="Pour tester le programme" id="tabTest" *ngIf="testID">
        <ng-template ngbTabContent>
            <div class="card">
                <div class="card-body">
                    <p *ngIf="person.data._id==='59fd991b1fdf3e542868c078'">
                        <a [href]="getUrl('taskshead')" target="_blank">Expérimenter avec cet utilisateur en tant que Head of Giga</a>
                    </p>
                    <p *ngIf="person.annotation.isLaboDirector">
                        <a [href]="getUrl('taskslabd')" target="_blank">Expérimenter avec cet utilisateur en tant que Head of Laboratory</a>
                    </p>
                    <p *ngIf="person.annotation.isDirector">
                        <a [href]="getUrl('taskslabd')" target="_blank">Expérimenter avec cet utilisateur en tant que Thematic Unit Director (entrer les PIs non membres d'un labo multi-team)</a>
                    </p>
                    <p *ngIf="person.annotation.isDirector">
                        <a [href]="getUrl('taskstrud')" target="_blank">Expérimenter avec cet utilisateur en tant que Thematic Unit Director (entrer les chefs de labo)</a>
                    </p>
                    <p *ngIf="person.annotation.isMainPi">
                        <a [href]="getUrl('taskspi')" target="_blank">Expérimenter avec cet utilisateur en tant que Pi</a>
                    </p>
                </div>
            </div>
        </ng-template>
    </ngb-tab>
</ngb-tabset>